# MCP 學習課程 - 詳細練習設計

## 練習 1: Hello World MCP Server & Client
**難度**: ⭐  
**預估時間**: 2-3 小時

### 學習目標
- 建立最基本的 MCP Server 和 Client
- 理解 stdio transport 的工作原理
- 掌握 MCP 連接握手流程

### 技術要點
- McpServer 初始化
- StdioServerTransport 使用
- Client 初始化和連接
- 基本通訊協議

### 實作要求
```typescript
// Server 功能
- 建立名為 "hello-server" 的 MCP 服務器
- 實作一個 "echo" 工具，將輸入文字原樣返回
- 支援 stdio transport

// Client 功能  
- 建立連接到 server 的 client
- 調用 echo 工具並顯示結果
```

### 測試項目
```bash
npm test:01
```
- [ ] Server 成功啟動
- [ ] Client 成功連接
- [ ] Echo 工具正常運作
- [ ] 連接可正常關閉

### 提示文檔要點
- MCP 協議基礎概念
- stdio transport 的選擇理由
- 常見連接問題排除

---

## 練習 2: 靜態資源服務器
**難度**: ⭐⭐  
**預估時間**: 3-4 小時

### 學習目標
- 實作 MCP Resources 功能
- 理解 Resource 和 Tool 的差異
- 掌握靜態數據暴露方法

### 技術要點
- registerResource 方法
- 資源 URI 設計
- MIME 類型處理
- 資源元數據管理

### 實作要求
```typescript
// 保留練習1的所有功能，並新增：
- 註冊靜態資源 "config://app" - 應用配置信息
- 註冊靜態資源 "help://commands" - 命令說明文檔
- 註冊靜態資源 "status://server" - 服務器狀態信息
- Client 能夠列出和讀取所有資源
```

### 測試項目
```bash
npm test:02
```
- [ ] 練習1的所有測試通過
- [ ] 資源列表正確返回 3 個資源
- [ ] 每個資源都能正常讀取
- [ ] 資源內容格式正確
- [ ] MIME 類型設置正確

### 提示文檔要點
- Resource 與 Tool 的使用場景
- URI 命名最佳實踐
- 資源內容格式設計

---

## 練習 3: 基礎工具服務器
**難度**: ⭐⭐  
**預估時間**: 4-5 小時

### 學習目標
- 實作多種 MCP Tools
- 掌握參數驗證和錯誤處理
- 理解工具的副作用概念

### 技術要點
- registerTool 進階用法
- Zod schema 驗證
- 錯誤處理最佳實踐
- 工具元數據設計

### 實作要求
```typescript
// 保留練習1+2的所有功能，並新增：
- "calculate" 工具 - 基本數學運算 (加減乘除)
- "text-transform" 工具 - 文字轉換 (大小寫、反轉等)
- "timestamp" 工具 - 時間戳生成和格式化
- 所有工具都要有完整的參數驗證
```

### 測試項目
```bash
npm test:03
```
- [ ] 練習1+2的所有測試通過
- [ ] 工具列表正確返回 4 個工具
- [ ] calculate 工具支援四則運算
- [ ] text-transform 支援多種轉換
- [ ] timestamp 工具格式化正確
- [ ] 參數驗證錯誤正確處理
- [ ] 無效操作返回適當錯誤

### 提示文檔要點
- 工具設計原則
- 參數驗證策略
- 錯誤信息設計規範

---

## 練習 4: 動態資源系統
**難度**: ⭐⭐⭐  
**預估時間**: 5-6 小時

### 學習目標  
- 實作動態參數化資源
- 掌握 ResourceTemplate 使用
- 理解 URI 模板解析

### 技術要點
- ResourceTemplate 進階用法
- 參數提取和驗證
- 動態內容生成
- 資源依賴關係

### 實作要求
```typescript
// 保留前3個練習的所有功能，並新增：
- "user://{userId}/profile" - 用戶資料資源
- "file://{category}/{filename}" - 文件系統資源  
- "data://{type}/latest" - 最新數據資源
- 支援資源參數自動完成
```

### 測試項目
```bash
npm test:04
```
- [ ] 前3個練習的所有測試通過
- [ ] 動態資源正確解析參數
- [ ] 不同參數組合返回不同內容
- [ ] 無效參數正確處理
- [ ] 資源模板列表功能正常
- [ ] 參數自動完成提示正確

### 提示文檔要點
- URI 模板設計模式
- 參數驗證策略
- 動態內容快取考量

---

## 練習 5: 進階工具與錯誤處理
**難度**: ⭐⭐⭐  
**預估時間**: 6-7 小時

### 學習目標
- 實作複雜異步工具
- 掌握完整錯誤處理機制  
- 理解工具執行生命週期

### 技術要點
- 異步工具實作
- 錯誤分類和處理
- 工具執行狀態管理
- 資源和工具的協同

### 實作要求
```typescript
// 保留前4個練習的所有功能，並新增：
- "file-read" 工具 - 讀取本地文件 (異步)
- "file-write" 工具 - 寫入本地文件 (異步)
- "http-fetch" 工具 - HTTP 請求 (異步，模擬)
- "data-process" 工具 - 數據處理 (可能失敗)
- 完整的錯誤分類和處理
```

### 測試項目
```bash
npm test:05
```
- [ ] 前4個練習的所有測試通過
- [ ] 異步工具正確執行
- [ ] 文件操作工具正常工作
- [ ] HTTP 工具模擬請求成功
- [ ] 各種錯誤情況正確處理
- [ ] 錯誤信息分類清晰
- [ ] 工具超時處理正確

### 提示文檔要點  
- 異步工具設計模式
- 錯誤處理最佳實踐
- 工具安全性考量

---

## 練習 6: 提示模板系統
**難度**: ⭐⭐⭐  
**預估時間**: 5-6 小時

### 學習目標
- 實作 MCP Prompts 功能
- 掌握提示模板設計
- 理解參數化提示使用

### 技術要點
- registerPrompt 方法
- 提示參數設計
- 消息格式標準化
- 提示模板重用

### 實作要求
```typescript
// 保留前5個練習的所有功能，並新增：
- "code-review" 提示 - 代碼審查模板
- "documentation" 提示 - 文檔生成模板  
- "bug-report" 提示 - 錯誤報告模板
- "meeting-summary" 提示 - 會議總結模板
- 支援提示參數自動完成
```

### 測試項目
```bash
npm test:06
```
- [ ] 前5個練習的所有測試通過
- [ ] 提示列表正確返回 4 個提示
- [ ] 每個提示參數正確填充
- [ ] 消息格式符合 MCP 標準
- [ ] 提示參數驗證正確
- [ ] 參數自動完成功能正常

### 提示文檔要點
- 提示模板設計原則
- 參數化策略
- 消息格式最佳實踐

---

## 練習 7: 整合功能服務器
**難度**: ⭐⭐⭐⭐  
**預估時間**: 7-8 小時

### 學習目標
- 整合 Resources、Tools、Prompts
- 實作功能間協同操作
- 掌握複雜數據流處理

### 技術要點
- 跨功能整合設計
- 數據流管理
- 狀態同步機制
- 功能依賴關係

### 實作要求
```typescript
// 保留前6個練習的所有功能，並新增整合功能：
- 內容管理系統模擬
  - 資源: "content://{type}/{id}"
  - 工具: "content-create", "content-update", "content-delete"  
  - 提示: "content-generation", "content-optimization"
- 功能間數據流協同
- 統一的內容存儲和檢索
```

### 測試項目
```bash
npm test:07
```
- [ ] 前6個練習的所有測試通過
- [ ] 內容 CRUD 操作正確
- [ ] 資源和工具數據一致性
- [ ] 提示生成內容可通過工具創建
- [ ] 整合工作流端到端測試通過
- [ ] 併發操作處理正確

### 提示文檔要點
- 整合架構設計
- 數據一致性保證
- 併發處理策略

---

## 練習 8: HTTP 傳輸服務器
**難度**: ⭐⭐⭐⭐  
**預估時間**: 8-9 小時

### 學習目標
- 實作 Streamable HTTP transport
- 掌握會話管理機制
- 理解遠端 MCP 服務部署

### 技術要點
- Express.js 整合
- StreamableHTTPServerTransport
- 會話生命週期管理
- HTTP 錯誤處理

### 實作要求
```typescript
// 保留前7個練習的所有功能，並新增：
- HTTP 服務器支援 (Express.js)
- 會話管理功能
- 同時支援 stdio 和 HTTP transport
- HTTP Client 實作
- 遠端調用測試
```

### 測試項目
```bash
npm test:08
```
- [ ] 前7個練習的所有測試通過 (stdio)
- [ ] HTTP 服務器成功啟動
- [ ] HTTP Client 成功連接
- [ ] 會話管理正確工作
- [ ] 所有功能通過 HTTP 正常運作
- [ ] 併發 HTTP 連接處理正確
- [ ] HTTP 錯誤處理適當

### 提示文檔要點
- HTTP transport 選擇考量
- 會話管理最佳實踐
- 網路錯誤處理策略

---

## 練習 9: 動態服務器功能
**難度**: ⭐⭐⭐⭐⭐  
**預估時間**: 9-10 小時

### 學習目標
- 實作運行時動態功能管理
- 掌握 MCP 通知機制
- 理解插件化架構設計

### 技術要點
- 動態註冊/移除功能
- listChanged 通知機制
- 插件加載和卸載
- 權限和狀態管理

### 實作要求
```typescript
// 保留前8個練習的所有功能，並新增：
- 動態插件系統
  - 運行時載入新工具
  - 運行時添加新資源
  - 權限控制功能開關
- "plugin-manager" 工具 - 插件管理
- "permission-control" 工具 - 權限管理
- 自動通知機制
```

### 測試項目
```bash
npm test:09
```
- [ ] 前8個練習的所有測試通過
- [ ] 動態添加工具功能正常
- [ ] 動態移除工具功能正常
- [ ] listChanged 通知正確發送
- [ ] 權限控制正確工作
- [ ] 插件系統載入/卸載穩定
- [ ] 多客戶端通知同步正確

### 提示文檔要點
- 動態功能設計模式
- 通知機制實作
- 插件安全性考量

---

## 練習 10: 完整應用實作
**難度**: ⭐⭐⭐⭐⭐  
**預估時間**: 12-15 小時

### 學習目標
- 實作生產級 MCP 應用
- 整合外部系統和數據庫
- 掌握監控、日誌、性能優化

### 技術要點
- 數據庫整合 (SQLite)
- 認證和授權
- 日誌和監控
- 性能優化
- 錯誤恢復

### 實作要求
```typescript
// 保留前9個練習的核心功能，並實作完整應用：
// 選擇一個情境 (以下擇一)：

// 情境A: 專案管理工具
- 任務管理 (CRUD)
- 團隊協作功能
- 報告生成
- 數據分析

// 情境B: 內容管理系統  
- 內容 CRUD
- 媒體文件管理
- 搜索和過濾
- 用戶權限管理

// 情境C: 開發工具整合
- 代碼分析
- 測試報告
- 部署管理
- 性能監控
```

### 測試項目
```bash
npm test:10
```
- [ ] 完整應用功能正常
- [ ] 數據庫操作正確
- [ ] 認證授權有效
- [ ] 性能指標符合要求
- [ ] 錯誤恢復機制正常
- [ ] 端到端工作流測試通過
- [ ] 併發用戶測試通過
- [ ] 長期運行穩定性測試通過

### 提示文檔要點
- 生產環境部署考量
- 性能優化策略
- 監控和維護最佳實踐

---

## 整體測試策略

### 自動化測試命令
```bash
# 運行單個練習測試
npm run test:01
npm run test:02
...
npm run test:10

# 運行累積測試 (包含前面所有練習)
npm run test:cumulative:05

# 運行完整測試套件
npm run test:all

# 性能測試  
npm run test:performance

# 整合測試
npm run test:integration
```

### 測試覆蓋率要求
- 單元測試覆蓋率 > 90%
- 整合測試覆蓋率 > 80%
- 端到端測試覆蓋主要工作流

這個詳細設計如何？需要我繼續設計具體的實作細節和測試案例嗎？